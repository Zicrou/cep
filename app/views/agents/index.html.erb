<main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3">
  <p id="notice"><%= notice %></p>

  <h1><%= link_to 'Ajouter Agent', new_agent_path, class:"btn btn-primary" %></h1> 
  <h2><u>Listes des agents:</u></h2>
  <br>

  <table>
    <thead>
      <tr>
        <th>Matricule</th>
        <th>||</th>
        <th>Nom</th>
        <th>||</th>
        <th>Prenom</th>
        <th>||</th>
        <th>Date pec</th>
        <th>||</th>
        <th>Date recrutement</th>
        <th>||</th>
        <th>Telephone</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @agents.each do |agent| %>
        <tr>
          <td><%= agent.matricule %></td>
          <th>||</th>
          <td><%= agent.nom %></td>
          <th>||</th>
          <td><%= agent.prenom %></td>
          <th>||</th>
          <td><%= agent.created_at %></td>
          <td>||</td>
          <td><%= agent.date_recrutement %></td>
          <th>||</th>
          <td><%= agent.telephone %></td>
          <td class="btn btn-primary" style="margin: 0.6em;" data-toggle="modal" data-target="#<%= dom_id(agent) %>">
                Voir Information
          </td>
          <td><%= link_to 'Show', agent, class:"btn btn-primary" %></td>
          <td><%= link_to 'Enfant', enfants_path(id_agent: agent.id), class:"btn btn-primary" %></td>
          <td><%= link_to 'Conjoint', conjoints_path(id_agent: agent.id), class:"btn btn-primary" %></td>
          <td><%#= link_to 'Edit', edit_agent_path(agent), class:"btn btn-primary" %></td>
          <td><%#= link_to 'Destroy', agent, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-primary" %></td>
        </tr>

        <!-- Modal -->
            <div class="modal fade" id="<%= dom_id(agent) %>" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header" style="background-color:#292b2c;color:white;">
                    <h5 class="modal-title" id="exampleModalLongTitle"><%= agent.nom + agent.prenom%></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>
                      <strong>Email: </strong><%= agent.email %>
                    </p>

                    <p>
                      <strong>Date de naissance: </strong><%= agent.date_naissance %>
                    </p>
                    
                    <p>
                      <strong>Lieu de naissance: </strong><%= agent.lieu_naissance %>
                    </p>

                    <% if agent.mode_paiement_id == 1 %>
                      <p>
                        <strong>Billeteur:</strong>
                        <%= agent.billeteur.nom_billeteur + " (" + agent.billeteur.code + ")" %>
                      </p>

                    <% else %>  
                      <p>
                        <strong>Banque:</strong>
                        <%= agent.banque.name %>
                      </p>

                      <p>
                        <strong>Agence:</strong>
                        <%= agent.agence.name %>
                      </p>

                      <p>
                        <strong>Numero de compte bancaire:</strong>
                        <%= agent.numcomptebancaire %>
                      </p>

                    <% end %>
                                      
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <!--button type="button" class="btn btn-primary">Save changes</button -->
                  </div>
                </div>
              </div>
            </div>
      <% end %>
    </tbody>
  </table>

  <br>

</main>